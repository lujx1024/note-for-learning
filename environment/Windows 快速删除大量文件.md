---
title: Windows 快速删除大量文件 
tags: Windows,快速删除,批处理
renderNumberedHeading: true
grammar_cjkRuby: true
---

# 概述
 `Windows`下删除上万个文件和子目录为什么会慢?  如果直接在`Windows`文件管理器里删除的话（通过菜单或者键盘`Del`或者`Shift+Del`），删除这个数量的文件需要大概10几分钟，具体根据文件数量目录层次不同耗时不同。这么慢是因为在删除之前系统有个`准备阶段`，在这个阶段系统要计算`目录和文件数量`、`文件总大小`、估算`删除所需时间`，而当执行删除的时候，系统仍然要统计和计算`每秒删除的速度`、`剩余多少`、`已删除文件数量`，这一系列的统计和计算是让用户直观的看到删除进度，**弊端就是降低了删除的速度**。

# 快速删除
通过命令行删除指令可将删除操作可快速执行删除操作，跳过系统计算文件数目、所需时间等操作

## 删除文件指令
```
DEL /F/Q/S *.*

# 参数解释
/F 强制删除只读文件
/Q 在模糊文件名匹配删除的时候，不询问是否删除
/S 删除当前目录和子目录中指定文件
```

> 上述指令在执行过程中会输出包含被删除文件路径和状态等信息的日志，如果不需要查看这些日志信息，可使用重定向隐藏，指令 ：`DEL /F/Q/S *.* > NUL`


## 删除目录
`DEL`命令只负责删除文件，删除目录需要下面这个命令，文档里指出它不能删除包含隐藏和系统文件的目录
```
RMDIR /Q/S images
 
/Q 不询问是否删除目录和子目录
/S 删除指定目录中的子目录和文件
```

## 批处理
	通过批处理脚本，将文件删除指令和文件目录删除指令结合，配置**系统注册表**，将脚本指令集成到鼠标**右键菜单**，即可方便快捷的调用**快速删除**功能。
###  脚本
   
保存下面代码到`fastdel.bat`中

``` 
@ECHO OFF
ECHO Delete Folder: %CD%?
PAUSE
SET FOLDER=%CD%
CD /
DEL /F/Q/S "%FOLDER%" > NUL
RMDIR /Q/S "%FOLDER%"
EXIT
```
	把这个`bat`文件加到系统环境变量中的`PATH`，就能在命令行里直接执行
	```
	FASTDEL images
	 ```
### 加入右键菜单
1. `WIN + R `打开运行对话框 输入`regedit`，回车打开注册表管理器
2. 找到`HKEY_CLASSES_ROOT\Directory\shell\`
   - 在`shell`目录上右击->新建->项
   - 输入名字：`快速删除` 回车
   - 右击刚刚建好的`快速删除`目录，新建->项
   - 输入：`command`
   - 单击刚刚建好的`command`，然后双击（`默认`）
   - 在数值数据中输入：`cmd /c "cd %1 && fastdel.bat"`，然后点击`确定`
     
   > 如果没有把`fastdel.bat`加到环境变量path的话，需要填写这个`bat`的**绝对路径**）


在`Windows资源管理器`中，右击某个目录，就可以在弹出的菜单中看到`快速删除`选项，点击之后就等于执行了`fastdel.bat`

